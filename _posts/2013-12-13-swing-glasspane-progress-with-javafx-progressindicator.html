---
layout: post
status: publish
published: true
title: Swing GlassPane Progress with JavaFX ProgressIndicator
author:
  display_name: Philipp Franke
  login: phil
  email: ph.franke@gmail.com
  url: http://devtopics.de/?page_id=221
author_login: phil
author_email: ph.franke@gmail.com
author_url: http://devtopics.de/?page_id=221
wordpress_id: 386
wordpress_url: http://devtopics.de/?p=386
date: '2013-12-13 22:03:43 +0100'
date_gmt: '2013-12-13 20:03:43 +0100'
categories:
- Java
- JavaFX
tags:
- Swing
- JavaFX
- GUI
- Progress
- ProgressIndicator
- GlassPane
comments: []
---
<p>Mit diesem kleinen Tutorial m&ouml;chte ich euch zeigen, wie einfach ihr mit Hilfe von JavaFX, einen coolen Progress auf eure Swing-Anwendung zaubert.</p>
<h1>1. Vorbereitung<&#47;h1><br />
Bevor wir mit dem Programmieren anfangen k&ouml;nnen, erstellen wir uns in Eclipse ein neues Projekt und binden die <strong>jfxrt.jar<&#47;strong> ein. Die Jar-Datei findet ihr in der Regel unter&nbsp;<strong><span style="text-decoration: underline;">C:\Program Files\Java\jdk1.7.0_xx\jre\lib <&#47;span><&#47;strong>oder wo auch immer ihr euer Java 1.7 installiert habt.</p>
<h1>2. Projekt<&#47;h1><br />
F&uuml;r dieses Tutorial habe ich mir ein einfaches Anwendungsbeispiel f&uuml;r eine GlassPane mit Progress &uuml;berlegt. Wir gehen davon aus, dass wir eine Anwengung haben, bei der sich ein Benutzer anmelden kann. Da es bei der Authentifizierung an einem Server meistens etwas dauert, k&ouml;nnen wir mit einem Progress dem Benutzer einen Status &uuml;ber den Anmeldevorgang liefern.</p>
<h2 style="padding-left: 30px;">2.1 Main<&#47;h2></p>
<pre class="brush: java; gutter: true">public class Main {<br />
	public static void main(String[] args) {<br />
		new LoginFrame();<br />
	}<br />
}<&#47;pre></p>
<h2 style="padding-left: 30px;">2.2 FXProgressPanel<&#47;h2><br />
Damit wir JavaFX-Inhalte in unserer Swing-Anwendung &uuml;berhaupt anzeigen k&ouml;nnen, erbt unser Panel von JFXPanel. Da JavaFX in einem eigenen User-Thread l&auml;uft, m&uuml;ssen wir unseren JavaFX-Code in ein Runnable verpacken und der Methode&nbsp;<code>Platform.runLater<&#47;code>&nbsp; &uuml;bergeben.</p>
<p>Ein ProgressIndicator ist in der Lage einen Fortschritt anzuzeigen. In unserem Beispiel kann der Benutzer beim Erzeugen entscheiden, welche Art von Progress er haben m&ouml;chte.</p>
<pre class="brush: java; gutter: true">public class FXProgressPanel extends JFXPanel {</p>
<p>	private static final long serialVersionUID = -8292481861229935364L;</p>
<p>	private ProgressIndicator progress;<br />
	private BorderPane rootPane = new BorderPane();<br />
	private boolean infiniteProgress = false;</p>
<p>	private FXProgressPanel (){<br />
		super();<br />
		Platform.runLater(new Runnable() {<br />
			@Override<br />
			public void run() {<br />
				init();<br />
			}<br />
		});<br />
	}</p>
<p>	public FXProgressPanel(boolean infiniteProgress){<br />
		this();<br />
		this.infiniteProgress = infiniteProgress;<br />
	}</p>
<p>	private void init() {<br />
		if(infiniteProgress){<br />
			progress = new ProgressIndicator();<br />
		} else {<br />
			progress = new ProgressIndicator(0.0);<br />
		}<br />
		progress.setStyle("-fx-padding: 100");<br />
		progress.setMaxSize(256, 256);<br />
		rootPane.setCenter(progress);<br />
		rootPane.setStyle("-fx-background-color: white");<br />
		rootPane.setOpacity(0.8);<br />
		setScene(new Scene(rootPane, Color.TRANSPARENT));<br />
	}</p>
<p>	public void increaseProgress(double value){<br />
		progress.setProgress(value);<br />
	}</p>
<p>	public boolean isInfiniteProgress() {<br />
		return infiniteProgress;<br />
	}<br />
}<&#47;pre></p>
<h2 style="padding-left: 30px;">2.3 LoginFrame<&#47;h2><br />
Der Thread soll einen einfachen Loginvorgang simulieren.</p>
<pre class="brush: java; gutter: true">public class LoginFrame extends JFrame {</p>
<p>	private static final long serialVersionUID = 3495500076555535882L;<br />
	private Thread 			worker;<br />
	private JTextField 		txtUsername;<br />
	private JPasswordField 		txtPassword;<br />
	private JButton			btnLogin;<br />
	private FXProgressPanel 	glassPane;<br />
	private boolean login   = 	false;</p>
<p>	public LoginFrame(){<br />
		super();<br />
		initComponents();<br />
		initFrame();<br />
		initThread();<br />
	}</p>
<p>	private void initFrame() {<br />
		setTitle("Java FX GlassPane Tutorial");<br />
		setSize(new Dimension(600, 400));<br />
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br />
		add(createJPanel());<br />
		setGlassPane(glassPane);<br />
		setLocationRelativeTo(null);<br />
		setVisible(true);<br />
	}</p>
<p>	private void initThread() {<br />
		worker = new Thread(new Runnable() {<br />
			@Override<br />
			public void run() {<br />
				while(true){<br />
					Thread.yield();<br />
					while(login){<br />
						LoginFrame.this.getGlassPane().setVisible(true);<br />
						try {<br />
							if(glassPane.isInfiniteProgress()){<br />
								Thread.sleep(5000);<br />
							} else {<br />
								for(double d = 0.0d; d <= 1.1d; d+=0.01d){<br />
									glassPane.increaseProgress(d);<br />
									Thread.sleep(60);<br />
								}<br />
							}<br />
						} catch (InterruptedException e) {<br />
							e.printStackTrace();<br />
						}<br />
						LoginFrame.this.getGlassPane().setVisible(false);<br />
						login = false;<br />
					}<br />
				}<br />
			}<br />
		});<br />
		worker.start();<br />
	}</p>
<p>	private void initComponents() {<br />
                &#47;&#47; true = infiniteProgress<br />
                &#47;&#47; false = finiteProgress<br />
                this.glassPane = new FXProgressPanel(true);<br />
		...<br />
	}<br />
	private JPanel createJPanel() {<br />
		...<br />
	}<br />
}<&#47;pre></p>
<h1>3. Ergebnisse<&#47;h1></p>
<h2 style="padding-left: 30px;">3.1 Progress mit Fortschrittsanzeige<&#47;h2><br />
<a href="http:&#47;&#47;devtopics.de&#47;wp-content&#47;uploads&#47;2013&#47;12&#47;finiteProgress.png"><img class="alignnone size-full wp-image-389" alt="Progress mit Fortschrittsanzeige" src="http:&#47;&#47;devtopics.de&#47;wp-content&#47;uploads&#47;2013&#47;12&#47;finiteProgress.png" width="599" height="401" &#47;><&#47;a></p>
<p>&nbsp;</p>
<h2 style="padding-left: 30px;">3.2 Progress ohne&nbsp;Fortschrittsanzeige<&#47;h2><br />
<a href="http:&#47;&#47;devtopics.de&#47;wp-content&#47;uploads&#47;2013&#47;12&#47;infiniteProgress.png"><img class="alignnone size-full wp-image-390" alt="Progress ohne Fortschrittsanzeige" src="http:&#47;&#47;devtopics.de&#47;wp-content&#47;uploads&#47;2013&#47;12&#47;infiniteProgress.png" width="599" height="401" &#47;><&#47;a></p>
<h1>4. Links<&#47;h1><br />
Mehr Informationen dazu findet ihr unter <a title="docs.oracle.com" href="http:&#47;&#47;docs.oracle.com&#47;javafx&#47;index.html" target="_blank">docs.oracle.com<&#47;a>.<a href="http:&#47;&#47;docs.oracle.com&#47;"><br />
<&#47;a></p>
